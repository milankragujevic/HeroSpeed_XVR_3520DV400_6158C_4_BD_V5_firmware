function apiPlugin(a){this.element=a}apiPlugin.prototype={sendRequest:function(b,a,d){var c={cmd:b,data:a};localServerWebsocket.websocketMessageSending(c,d)},createWindow:function(){this.sendRequest("createWnd",{rect:this.getPosition()})},destroyWindow:function(){this.sendRequest("destroyWnd");return this},moveWindow:function(){localServerWebsocket.windowWidth=$(window).width();this.sendRequest("moveWnd",{rect:this.getPosition()})},updateWindow:function(){this.sendRequest("updateWebWnd")},showWindow:function(){this.sendRequest("showWnd")},hideWindow:function(a){this.sendRequest("hideWnd","",a)},setPlayWindowNum:function(a){this.sendRequest("arrangeWnd",{arrangeType:parseInt(a)})},startPreview:function(e,i,f,c,d,j,b,a,h,g){if(!d||d==""){d=2}this.sendRequest("startPlay",{url:this.url,requestJson:{action:"play",data:{channel:parseInt(e),stream:parseInt(i),sessionID:g}},playParam:{videoCoder:parseInt(c),audioCoder:parseInt(d),frameRate:parseInt(j),bitRate:parseInt(b),width:parseInt(a),height:parseInt(h)},wndIndex:parseInt(f)})},stopPreview:function(a,b){this.sendRequest("stopPlay",{requestJson:{action:"stop",data:{sessionID:b}},channel:parseInt(a)});return this},audioAction:function(b,a){b?this.sendRequest("openSound",{wndIndex:parseInt(a)}):this.sendRequest("closeSound");return b},screenshot:function(b,a){this.sendRequest("capture",{wndIndex:parseInt(a),fileName:b})},startRec:function(b,a,d){var c={wndIndex:parseInt(a),fileName:d};b&&(c.channel=parseInt(b));this.sendRequest("startRecord",c);return this},stopRec:function(b,a){var c=a?{wndIndex:parseInt(b)}:{channel:parseInt(b)};this.sendRequest("stopRecord",c);return this},zoomAction:function(a,b){var c=b?"enableZoom":"disableZoom";this.sendRequest(c,{wndIndex:parseInt(a)});return this},setFullScreen:function(){this.sendRequest("fullScreen",{full:true})},getLocalConfigs:function(a){this.sendRequest("getLocalConfig",{deviceType:a})},setLocalConfigs:function(c,b,d,e,a){this.sendRequest("setLocalConfig",{deviceType:getDevConf("deviceType"),localConfig:{recordFilePath:c,downloadFilePath:b,captureLivePath:d,capturePlaybackPath:e,clipsPlaybackPath:a}})},browseFilePaths:function(){this.sendRequest("browseFilePath")},startTalks:function(b,c,e,a,d){this.sendRequest("startTalk",{url:this.url+"/talk",requestJson:{action:"play",data:{encodeType:parseInt(b),sampleRate:parseInt(c),channelCnt:parseInt(e),bitWide:parseInt(a),sessionID:d}}})},stopTalks:function(a){this.sendRequest("stopTalk",{requestJson:{action:"stop",data:{sessionID:a}}})},startPlayBacks:function(h,g,i,c,f,d,e,l,b,a,k,j){if(!d||d==""){d=96}this.sendRequest("startPlayBack",{wndIndex:parseInt(h),url:this.url+"/playback",requestJson:{action:"play",data:{channel:parseInt(g),streamNo:0,fileType:parseInt(i),startTime:String(c),endTime:String(f),speed:0,sessionID:j}},playParam:{videoCoder:parseInt(d),audioCoder:parseInt(e),frameRate:parseInt(l),bitRate:parseInt(b),width:parseInt(a),height:parseInt(k)}})},pausePlayBacks:function(a,b){this.sendRequest("pausePlayBack",{requestJson:{action:"pause",data:{sessionID:b}},wndIndex:a})},resumePlayBacks:function(a,b){this.sendRequest("resumePlayBack",{requestJson:{action:"continue",data:{sessionID:b}},wndIndex:a})},stopPlayBacks:function(a,b){this.sendRequest("stopPlayBack",{requestJson:{action:"stop",data:{sessionID:b}},wndIndex:a})},setPlaybackSpeeds:function(a,b,c){this.sendRequest("setPlaybackSpeed",{requestJson:{action:"setSpeed",data:{speed:parseInt(b),sessionID:c}},wndIndex:a})},downloadRecordFileStart:function(f,e,a,d,j,g,i,b,c,h){this.sendRequest("startDownload",{url:this.url+"/playback",requestJson:{action:"download",data:{channel:parseInt(f),streamNo:0,fileType:parseInt(g),speed:0,startTime:String(a),endTime:String(d),format:"RAW",sessionID:h}},fileSize:String(b),fileName:String(c)})},downloadRecordFileStop:function(a){this.sendRequest("stopDownload",{requestJson:{action:"stopDownload",data:{sessionID:a}}})},getCurrentWindow:function(a){this.sendRequest("getSelectWndIndex","",a)},getPlayBackCurrentTime:function(a){this.sendRequest("getOSDTime",{wndIndex:parseInt(a)})},getBitRates:function(a){this.sendRequest("getBitRate",{channel:parseInt(a)})},openFloder:function(a){this.sendRequest("openDownloadFloder",{filePath:a})},open:function(){loading(true);this.url=localServerWebsocket.deviceUrl;this.sendRequest("webconnect")},webconnect:function(a){this.getLocalConfigs(getDevConf("deviceType"));localServerWebsocket.uuid=a.uuid;localServerWebsocket.windowWidth=$(window).width();comparePluginVersions(a.data.version,versionconfig.plugin_version)?updatePlugin():"";if(getConf("isHidePlugin")){return loading(false)}$(document).attr("title",localServerWebsocket.uuid);this.destroyWindow()},destroyWnd:function(){this.createWindow()},createWnd:function(a){loading(false);if(a.data.errorCode!=0){return alert(lang.createWindowFail)}this.setPlayWindowNum(localServerWebsocket.windowNum);onImplement()},getPosition:function(){var e=$("#videoBlock"),a=0,b=0;if($(window).width()<window.screen.width){a=-8;b=8}var d=window.screenTop+(window.outerHeight-window.innerHeight)+e.offset().top+a,c=window.screenLeft+e.offset().left+b;return{left:parseInt(e.offset().left),top:parseInt(e.offset().top),width:parseInt(e.width()),height:parseInt(e.height())}},updateWebWnd:function(){onImplement()},onGetSelectWndIndex:function(a){setConf("selectWindowIndex",a.data.wndIndex);onSelectWindowChange(a.data.wndIndex)},getLocalConfig:function(a){setConf("localConfig",a.data.localConfig)},getOSDTime:function(a){onOSDTime(a.data.osdTime)},startPlay:function(a){onStartPlay(a.data.errorCode)},startRecord:function(a){onRecord(a.data.errorCode)},startDownload:function(a){onDownload(a.data.errorCode)},startPlayBack:function(a){onStartPlayBack(a.data.errorCode,a.data.wndIndex)},startTalk:function(a){onStartTalk(a.data.errorCode)},openSound:function(a){onOpenSound(a.data.errorCode)},playbackFileEnd:function(a){onPlaybackFileEnd(a.data.stopTime,a.data.wndIndex)},downloadProgress:function(a){getUpdateProcess(a.data.progress)},downloadStartTime:function(a){getFileIndex(a.data.startTime)},browseFilePath:function(a){onSetPath("path",a.data.filePath)},setLocalConfig:function(a){this.getLocalConfigs(getDevConf("deviceType"));onSetPath("result",a.data.errorCode)},getBitRate:function(a){onBitRate(a.data.bitRate)}};