var ptzVariables={currentChannel:0};function onLoad(){initDot();setTitle(lang.ptzconfig);getPtzData();protolChange();initPtzEvent()}function initPtzEvent(){$(".J-channel").on("change",function(){channel=parseInt($(this).val());$(this).val()!=ptzVariables.currentChannel&&getPtzData(channel)});$("#protocolList").on("change",function(){protolChange()});$(".J-addr").on("keyup",function(a){if(keyboardFilter(a)){this.value=numberRangeLimt(this,0,255)}}).on("blur",function(){if(this.value==""){this.value="0"}});$(".J-ptz-save").on("click",function(){onSavePtz()})}function getChannel(){var c=getTotalChannelNum(),d=[],b="";for(var a=0;a<c;a++){b=a>=9?"":0;if(window.top.vChannelConfig[a]==1||isNVR()){d.push("CH"+b+(a+1))}}return d}function getPtzData(a){a||(a=0);api.ptzConfig(REQUEST_GET,{channel:a},function(b,c){ptzVariables.currentChannel=a;autoFillValue("ptz",c);autoFillValue("serial",c.serial)})}function protolChange(){var a=$("#protocolList").val()>1?true:false;$(".disabled").attr("disabled",a)}function onSavePtz(){var a=getMatchValue("ptz"),b=a.channel,d=a.protocol,e=getMatchValue("serial");var c={channel:b,protocol:d,serial:e};api.ptzConfig(REQUEST_SET,c,function(g,f){showSaveMsg(g)})};