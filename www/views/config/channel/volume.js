var volumeVariables={};function onLoad(){initDot();initVolume()}function initVolume(){setTitle(lang.volumeset);initAudioChannel(getTotalChannelNum());loadVolume(0);var a=0;$(".J-xvr-audio-channel").change(function(){var b=$(this).val();if(b>=0&&b!=a){loadVolume($(this).val());a=b}});$(".J-audio-output").bind({keyup:function(b){if(keyboardFilter(b)){this.value=numberRangeLimt(this,0,100);$(".J-slide-out").slider("value",this.value)}},blur:function(){if(this.value==""){this.value="0"}}});$(".J-audio-save").on("click",saveVolume)}function initAudioChannel(b){var d=0,e="",f=0,a=true,h=[],g=[];for(var c=0;c<window.top.vChannelConfig.length;c++){if(window.top.vChannelConfig[c]==1){h.push(window.top.vChannelConfig[c])}if(window.top.vChannelConfig[c]==0){g.push(window.top.vChannelConfig[c])}}h=h.length;g=g.length;if((h||g)===0){a=false}a?(f=h+g):(f=b);for(var c=1;c<=f;c++){e=c>9?"":"0";$("<option value='"+(c-1)+"' >CH"+e+c+"</option>").appendTo($(".J-xvr-audio-channel"));d++}d==0?$(".J-audio-save").prop("disabled","disabled"):$(".J-audio-save").prop("disabled",false)}function loadVolume(a){api.audioEncode(REQUEST_GET,{channel:parseInt(a)},function(b,c){if(b!=CODE_SUCCESS){return}autoFillValue("volume",c);$(".J-xvr-audio-channel").val(c.channel);if(isXVR()){if(typeof c.inputVolume=="undefined"){$(".J-volume").hide()}else{$(".J-volume").show()}}$("#slideInVol").slider({min:0,max:100,slide:function(d,e){$("#iptInVol").val(e.value)}});setEditNumberStyle("#iptInVol",false,function(d,f,e){$("#slideInVol").slider("value",e)});$(".J-audio-output").keyup(function(f){var e=$(this);if(f.keyCode==13){var g=parseInt(e.val());if(g>=0&&g<=100){e.val(g);var d=$(".J-slide-out");d.slider({max:c.outputVolumeMin,min:c.outputVolumeMax,value:$(".J-audio-output").val(),slide:function(h,i){$(".J-audio-output").val(i.value)}});d.slider("value",g)}else{$(".J-audio-output").focus();rightPopup(lang.setSlideTips2)}}})})}function saveVolume(a){if(!a&&isXVR()){xvr.getPlayBackStatus(function(c,e){if(c!=HTTP_OK){rightPopup(lang.savedfail)}var d=splitOkVal(e);if(d.getpbstatus&&d.getpbstatus!=0){rightPopup(lang.pb7);return}saveVolume(true)});return}var b=getMatchValue("volume");b.channel=parseInt($(".J-xvr-audio-channel").val());api.audioEncode(REQUEST_SET,b,function(c){if(c!=CODE_SUCCESS){return}rightPopup(lang.saved)})};