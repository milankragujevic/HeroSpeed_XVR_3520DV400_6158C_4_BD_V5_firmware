var channelNameVariables={channelNum:getTotalChannelNum(),xvrChannelConfig:vChannelConfig.indexOf(MODE_OTHER)};var getNum=isXVR()&&channelNameVariables.xvrChannelConfig>-1?channelNameVariables.xvrChannelConfig:channelNameVariables.channelNum;function onLoad(){initDot();setTitle(lang.defaultChannel);var c={};var a=navigator.userAgent.toLowerCase();var b;(b=a.match(/msie ([\d.]+)/))?c.ie=b[1]:(b=a.match(/firefox\/([\d.]+)/))?c.firefox=b[1]:(b=a.match(/chrome\/([\d.]+)/))?c.chrome=b[1]:(b=a.match(/opera.([\d.]+)/))?c.opera=b[1]:(b=a.match(/version\/([\d.]+).*safari/))?c.safari=b[1]:0;parseFloat(c.ie)<=8&&($(".J-channel-name").css("overflow","scroll"));$(".J-channel-text").change(function(){var d=$(this);var e=d.val();if(e&&e.length>31){d.val(e.substr(0,31))}checkStringValid(d.val(),this,2,true,true);preventIllegalCharacters(d.context)});$(".J-save").on("click",function(){channelNameSave()});$(".J-option-default").on("click",function(){channelNameOptionDefault()});loadChannelName()}function channelNameOptionDefault(){for(var a=0;a<getNum;a++){$(".J-channel-text").eq(a).val("CH"+(a+1))}channelNameSave()}function loadChannelName(){var b=[];for(var a=0;a<getNum;a++){b.push(a)}api.defaultChannel(REQUEST_GET,{channel:b},function(d,e){if(d!=CODE_SUCCESS){return}for(var c=0;c<e.length;c++){$(".J-channel-text").eq(c).val(e[c].name)}})}function channelNameSave(){var c=[];var b=vChannelConfig.indexOf(MODE_OTHER);for(var a=0;a<getNum;a++){if($(".J-channel-text").eq(a).val().indexOf("=")>=0||$(".J-channel-text").eq(a).val().indexOf("!")>=0){return rightPopup(lang.nosupport)}c.push({channel:a,name:$(".J-channel-text").eq(a).val()})}api.defaultChannel(REQUEST_SET,c,function(d){showSaveMsg(d)})}function preventIllegalCharacters(a){replaceAndSetPos(a,/[\u4e00-\u9fa5;]/g,"")};