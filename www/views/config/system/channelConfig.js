var channelConfigVariables={channelNum:getDevConf("ipChannelNumMax"),isAllIP:false,defaultCheck:{getchanchn1model:"1",getchanchn2model:"1",getchanchn3model:"1",getchanchn4model:"1",getchanchn5model:"0",getchanchn6model:"0",getchanchn7model:"4",getchanchn8model:"4",getchanchn9model:"4",getchanchn10model:"4",getchanchn11model:"4",getchanchn12model:"4",getchanchn13model:"4",getchanchn14model:"4",getchanchn15model:"4",getchanchn16model:"4"},channelMode:{IP:"0",HD:"1",PLACEHOLDER:"2",PLACEHOLDER:"3",OTHER:"4"}};function onLoad(){initDot();if(isCpuEq("CPU_3521D")||isCpuEq("CPU_3521D_8AHD_NRT_6158C")||isCpuEq("CPU_3521D_4SDI_334S")){setConf("allHDMaxIPCNum",isCpuEq("CPU_3521D")||isCpuEq("CPU_3521D_8AHD_NRT_6158C")||isCpuEq("CPU_3521D_4SDI_334S")?4:0)}else{if(isCpuEq("CPU_3520DV400_4AHD_NRT_6158C"||isCpuEq("CPU_MC6630_4AHD_NRT_2830"))){setConf("allHDMaxIPCNum",isCpuEq("CPU_3520DV400_4AHD_NRT_6158C")?2:0);setConf("allHDMaxIPCNum",isCpuEq("CPU_MC6630_4AHD_NRT_2830")?2:0)}else{setConf("allHDMaxIPCNum",isCpuEq("CPU_3531D_4AHD_4M_RT")||isCpuEq("CPU_3531DCAS_8AHD_4M_RT")||isCpuEq("CPU_3531D")||isCpuEq("CPU_3531D_16AHD_NRT_6158C_2")||isCpuEq("CPU_3531D_16AHD_NRT_6158C")||isCpuEq("CPU_3531D_8SDI_334S")||isCpuEq("CPU_3531D_16AHD_NRT_6168C_X1")?8:0)}}setTitle(lang.channelconfig);initChConf(getDevConf("platformType"),channelConfigVariables.channelNum);loadChConfSetting(channelConfigVariables.channelNum);var a={};var b=navigator.userAgent.toLowerCase();var c;(c=b.match(/msie ([\d.]+)/))?a.ie=c[1]:(c=b.match(/firefox\/([\d.]+)/))?a.firefox=c[1]:(c=b.match(/chrome\/([\d.]+)/))?a.chrome=c[1]:(c=b.match(/opera.([\d.]+)/))?a.opera=c[1]:(c=b.match(/version\/([\d.]+).*safari/))?a.safari=c[1]:0;if(parseFloat(a.ie)<=8){$(".J-channel-name").css("overflow","scroll")}if(isCpuEq("CPU_3531DCAS_32AHD_1080P_NRT")){$(".blkTip1").show()}}function loadChConfSetting(a){api.channelConfig(REQUEST_GET,null,function(d,e){if(d!==CODE_SUCCESS){return}if(getConf("isLiteModeEn")){$("#selLiteMote").val(e.liteMode)}for(var c=0;c<e.channelModeList.length;c++){var b=e.channelModeList[c];if(b.mode==channelConfigVariables.channelMode.IP){channelConfigVariables.isAllIP=true;$("#IP"+c).prop("checked",true)}else{channelConfigVariables.isAllIP=false;$("#HD"+c).prop("checked",b.mode==channelConfigVariables.channelMode.HD)}}channelConfigVariables.isAllIP&&getConf("isLiteModeEn")&&$("#selLiteMote").val(0).prop("disabled",true)})}function saveChannelConf(){var c=getDevHDNum(getDevConf("platformType"),channelConfigVariables.channelNum);if(c===-1){return}var a=[],e="";for(var b=0;b<channelConfigVariables.channelNum;++b){if(b<=c&&$("#HD"+b).prop("checked")){e=channelConfigVariables.channelMode.HD}else{if($("#IP"+b).prop("checked")){e=channelConfigVariables.channelMode.IP}else{e=channelConfigVariables.channelMode.OTHER}}a.push({channel:b+1,mode:Number(e)})}if(confirm(lang.chanelconfgreboot)){var d={liteMode:Number($("#selLiteMote").val()),channelModeList:a};api.channelConfig(REQUEST_SET,d,function(f,g){if(f!==CODE_SUCCESS){return}api.restart(REQUEST_SET,function(h){if(h!=CODE_SUCCESS){return}});window.top.doRestartCount(0)})}}function isHdEnableAlltoIP(s,o,d,a){var n=true;var b=true;for(var q=0;q<o;q++){var e="#HD"+q;var l=$(e).prop("checked");if(l){b=false}else{n=false}}if(n){for(var p=0;p<d;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}if(isCpuEq("CPU_MC6630_4AHD_NRT_2830")){$.each(channelConfigVariables.defaultCheck,function(j,u){var i=parseInt(j.replace("getchanchn","").replace("model",""))-1;if(u===channelConfigVariables.channelMode.IP){$("#IP"+i).prop("checked",true);channelConfigVariables.isAllIP=true}else{channelConfigVariables.isAllIP=false;$("#HD"+i).prop("checked",u===channelConfigVariables.channelMode.HD)}})}var c=(0|getConf("allHDMaxIPCNum"));c>0&&$("[id^=IP]").slice(o,c+o).prop("checked",true)}if(b){for(var p=0;p<d;p++){var r="#IP"+p;var h=$(r);h.prop("checked",true)}getConf("isLiteModeEn")&&$("#selLiteMote").val(0).prop("disabled",true)}else{getConf("isLiteModeEn")&&$("#selLiteMote").prop("disabled",false)}if(!n&&!b){if(typeof a==="number"){for(var q=o;q<d;++q){$("#IP"+q).prop("checked",q<a?true:false)}if(isCpuEq("CPU_3531DCAS_32AHD_1080P_NRT")){var k=$("[id^=HD]");var t=false;for(var q=0;q<16;++q){if(k.eq(q).prop("checked")){var m=$("[id^=IP]");for(var p=16;p<32;++p){m.eq(p).prop("checked",false);k.eq(p).prop("checked",true)}break}}}return}if(o==4&&d==9){for(var p=6;p<d;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}for(var p=o;p<6;p++){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}else{if(o==8&&d==16){if(a){for(var p=0;p<16;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}}if(a==14){for(var p=0;p<14;p++){var g="#HD"+p;var f=$(g).is(":checked");if(!f){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}else{if(a==12){for(var p=0;p<12;p++){var g="#HD"+p;var f=$(g).is(":checked");if(!f){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}else{if(a==10){for(var p=0;p<10;p++){var g="#HD"+p;var f=$(g).is(":checked");if(!f){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}else{if(a==9){for(var p=0;p<9;p++){var g="#HD"+p;var f=$(g).is(":checked");if(!f){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}else{for(var p=8;p<d;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}for(var p=o;p<8;p++){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}}}}else{if(o==4&&d==16){for(var p=9;p<d;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}for(var p=o;p<9;p++){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}else{if(o==8&&d==32){for(var p=16;p<d;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}for(var p=o;p<16;p++){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}else{if(o==16&&d==32){if(a==25){for(var p=0;p<32;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}for(var p=0;p<25;p++){var g="#HD"+p;var f=$(g).is(":checked");if(!f){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}else{if(a==16){for(var p=0;p<32;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}for(var p=0;p<16;p++){var g="#HD"+p;var f=$(g).is(":checked");if(!f){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}else{if(a==32){for(var p=0;p<32;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}for(var p=0;p<16;p++){var g="#HD"+p;var f=$(g).is(":checked");if(!f){var r="#IP"+p;var h=$(r);h.prop("checked",true)}}}}}}else{for(var p=o;p<d;p++){var r="#IP"+p;var h=$(r);h.prop("checked",false)}}}}}}}}function checkhd(j){var p=$(this).parents(".form-item").index();p!==-1&&(j=p);var n="#HD"+j;var e=$(n).is(":checked");var o="";var m="";var d="";var b="";if(j%2==0){o="#IP"+j;m="#IP"+(j+1);d="#HD"+j;b="#HD"+(j+1)}else{o="#IP"+(j-1);m="#IP"+(j);d="#HD"+(j-1);b="#HD"+j}var c=$(o);var a=$(m);var l=$(d);var k=$(b);if(e){c.prop("checked",false);a.prop("checked",false);l.prop("checked",true);k.prop("checked",true)}else{c.prop("checked",true);a.prop("checked",true);l.prop("checked",false);k.prop("checked",false)}switch(channelConfigVariables.channelNum){case 9:isHdEnableAlltoIP(true,4,9);break;case 16:if(getDevConf("platformType")=="CPU_3521"||getDevConf("platformType")=="CPU_3520DV300"||getDevConf("platformType")=="CPU_3520DV400_8AHD_NRT"){isHdEnableAlltoIP(true,8,16)}else{if(getDevConf("platformType")=="CPU_3521A_4AHD"||getDevConf("platformType")=="CPU_3521A_4AHD_2826"||getDevConf("platformType")=="CPU_3520DV300_4AHD_2826"||getDevConf("platformType")=="CPU_3520DV400"||getDevConf("platformType")=="CPU_3521A_4SDI_334S"||getDevConf("platformType")=="CPU_3521D_4SDI_334S"||getDevConf("platformType")=="CPU_3521D"||getDevConf("platformType")=="CPU_3521D_SMARTKITS"||getDevConf("platformType")=="CPU_3520DV400_4AHD_NRT_6158C"||getDevConf("platformType")=="CPU_MC6630_4AHD_NRT_2830"||getDevConf("platformType")=="CPU_MC6630_4AHD_1080N_RT_2830"||getDevConf("platformType")=="CPU_MC6630"){isHdEnableAlltoIP(true,4,16)}else{if(getDevConf("platformType")=="CPU_3521A_8AHD_2826"||getDevConf("platformType")=="CPU_3521D_8AHD_NRT"||getDevConf("platformType")=="CPU_3521D_8AHD_NRT_6168C"||getDevConf("platformType")=="CPU_3520DV400_8AHD_1080N_NRT_6158C"||getDevConf("platformType")=="CPU_MC6630_8AHD_1080N_NRT_2830"){isHdEnableAlltoIP(true,8,16,9)}else{if(getDevConf("platformType")=="CPU_3521D_8AHD_NRT_6158C"){isHdEnableAlltoIP(true,8,16,14)}else{isHdEnableAlltoIP(true,16,16)}}}}break;case 32:if(getDevConf("platformType")=="CPU_3531A_8AHD"||getDevConf("platformType")=="CPU_3531A_8SDI_334S"||getDevConf("platformType")=="CPU_3531D_8SDI_334S"){isHdEnableAlltoIP(true,8,32)}else{if(getDevConf("platformType")=="CPU_3531A_16AHD"){var h=0;for(var g=0;g<16;g++){var f="#HD"+g;if($(f).is(":checked")){h++}}if(h<=8){isHdEnableAlltoIP(true,16,32,25)}else{if(h>8&&h<16){isHdEnableAlltoIP(true,16,32,16)}}}else{if(getDevConf("platformType")=="CPU_3531A"||getDevConf("platformType")=="CPU_3531D_32AHD_NRT"){isHdEnableAlltoIP(e,32,32)}else{if(getDevConf("platformType")=="CPU_3531A_16AHD_NTR_2826"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6168C"||getDevConf("platformType")=="CPU_3531DCAS_16AHD_RT"||getDevConf("platformType")=="CPU_3531DCAS_16AHD_8SATA_RT"||getDevConf("platformType")=="CPU_3531DCAS_16SDI_334S"){isHdEnableAlltoIP(true,16,32,16)}else{if(getDevConf("platformType")=="CPU_3531D"||getDevConf("platformType")=="CPU_3531DCAS_8AHD_4M_RT"){isHdEnableAlltoIP(true,8,32,16)}else{if(getDevConf("platformType")=="CPU_3531D_4AHD_4M_RT"){isHdEnableAlltoIP(true,4,32,16)}else{if(getDevConf("platformType")==="CPU_3531DCAS_32AHD_1080P_NRT"){isHdEnableAlltoIP(true,32,32,32)}else{if(getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6158C_2"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6168C_X1"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6158C"){var h=0;for(var g=0;g<16;g++){var f="#HD"+g;if($(f).is(":checked")){h++}}if(h<16){isHdEnableAlltoIP(true,16,32,25)}else{isHdEnableAlltoIP(true,16,32,24)}}}}}}}}}break}}function checkip(j){var p=$(this).parents(".form-item").index();p!==-1&&(j=p);var n="#IP"+j;var e=$(n).is(":checked");var o="";var m="";var d="";var b="";if(j%2==0){o="#IP"+j;m="#IP"+(j+1);d="#HD"+j;b="#HD"+(j+1)}else{o="#IP"+(j-1);m="#IP"+(j);d="#HD"+(j-1);b="#HD"+j}var c=$(o);var a=$(m);var l=$(d);var k=$(b);if(e){c.prop("checked",true);a.prop("checked",true);l.prop("checked",false);k.prop("checked",false)}else{c.prop("checked",false);a.prop("checked",false);l.prop("checked",true);k.prop("checked",true)}switch(channelConfigVariables.channelNum){case 9:isHdEnableAlltoIP(false,4,9);break;case 16:if(getDevConf("platformType")=="CPU_3521"||getDevConf("platformType")=="CPU_3520DV300"||getDevConf("platformType")=="CPU_3520DV400_8AHD_NRT"){isHdEnableAlltoIP(false,8,16)}else{if(getDevConf("platformType")=="CPU_3521A_4AHD"||getDevConf("platformType")=="CPU_3521A_4AHD_2826"||getDevConf("platformType")=="CPU_3520DV400"||getDevConf("platformType")=="CPU_3520DV300_4AHD_2826"||getDevConf("platformType")=="CPU_3521A_4SDI_334S"||getDevConf("platformType")=="CPU_3521D_4SDI_334S"||getDevConf("platformType")=="CPU_3521D"||getDevConf("platformType")=="CPU_3521D_SMARTKITS"||getDevConf("platformType")=="CPU_3520DV400_4AHD_NRT_6158C"||getDevConf("platformType")=="CPU_MC6630_4AHD_NRT_2830"){isHdEnableAlltoIP(false,4,16)}else{if(getDevConf("platformType")=="CPU_3521A_8AHD_2826"||getDevConf("platformType")=="CPU_3521D_8AHD_NRT"||getDevConf("platformType")=="CPU_3521D_8AHD_NRT_6168C"||getDevConf("platformType")=="CPU_3520DV400_8AHD_1080N_NRT_6158C"||getConf("isCPUMC6630")){isHdEnableAlltoIP(true,8,16,9)}else{if(getDevConf("platformType")=="CPU_3521D_8AHD_NRT_6158C"){isHdEnableAlltoIP(true,8,16,14)}else{isHdEnableAlltoIP(false,16,16)}}}}break;case 32:if(getDevConf("platformType")=="CPU_3531A_8AHD"||getDevConf("platformType")=="CPU_3531A_8SDI_334S"||getDevConf("platformType")=="CPU_3531D_8SDI_334S"){isHdEnableAlltoIP(false,8,32)}else{if(getDevConf("platformType")=="CPU_3531A_16AHD"){var h=0;for(var g=0;g<16;g++){var f="#HD"+g;if($(f).is(":checked")){h++}}if(h<=8){isHdEnableAlltoIP(true,16,32,25)}else{if(h>8&&h<16){isHdEnableAlltoIP(true,16,32,16)}}}else{if(getDevConf("platformType")=="CPU_3531A"||getDevConf("platformType")=="CPU_3531D_32AHD_NRT"){isHdEnableAlltoIP(e,32,32)}else{if(getDevConf("platformType")=="CPU_3531A_16AHD_NTR_2826"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6168C"||getDevConf("platformType")=="CPU_3531DCAS_16AHD_RT"||getDevConf("platformType")=="CPU_3531DCAS_16AHD_8SATA_RT"||getDevConf("platformType")=="CPU_3531DCAS_16SDI_334S"){isHdEnableAlltoIP(true,16,32,16)}else{if(getDevConf("platformType")=="CPU_3531D"||getDevConf("platformType")=="CPU_3531DCAS_8AHD_4M_RT"){isHdEnableAlltoIP(true,8,32,16)}else{if(getDevConf("platformType")=="CPU_3531D_4AHD_4M_RT"){isHdEnableAlltoIP(true,4,32,16)}else{if(getDevConf("platformType")=="CPU_3531DCAS_32AHD_1080P_NRT"){isHdEnableAlltoIP(true,32,32,32)}else{if(getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6158C_2"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6168C_X1"||getDevConf("platformType")=="CPU_3531D_16AHD_NRT_6158C"){var h=0;for(var g=0;g<16;g++){var f="#HD"+g;if($(f).is(":checked")){h++}}if(h<16){isHdEnableAlltoIP(true,16,32,25)}else{isHdEnableAlltoIP(true,16,32,24)}}}}}}}}}break}}function initChConf(a,g){var c=getDevHDNum(a,g);if(c===-1){return}var d=$("#tempChItemAll");d.children().eq(1).children().click(checkhd).parent().next().children().click(checkip);var h=$("#tempChItemIP");h.children().eq(2).children().click(checkip);var e=$(".J-channel-name");g=parseInt(g);for(var b=0;b<g;++b){if(b<c){var f=d.clone(true,true).removeAttr("id");f.children().eq(0).html("<span>"+lang.chAbbr+(b+1)+"</span>").next().children().attr("id","HD"+b).parent().next().children().attr("id","IP"+b);f.appendTo(e)}else{var f=h.clone(true,true).removeAttr("id");f.children().eq(0).html("<span>"+lang.chAbbr+(b+1)+"</span>").next().next().children().attr("id","IP"+b);f.appendTo(e)}}getConf("isLiteModeEn")&&$(".blkLite").show()};